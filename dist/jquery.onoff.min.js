/** jquery.onoff - v0.3.4 - 2014-05-15
* https://github.com/timmywil/jquery.onoff
* Copyright (c) 2014 Timmy Willison; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):a.jQuery)}(this,function(a){"use strict";function b(c,e){if(!(this instanceof b))return new b(c,e);if("input"!==c.nodeName.toLowerCase()||"checkbox"!==c.type)return a.error("OnOff should be called on checkboxes");var f=a.data(c,b.datakey);return f?f:(this.options=e=a.extend({},b.defaults,e),this.elem=c,this.$elem=a(c).addClass(e.className),this.$doc=a(c.ownerDocument||document),e.namespace+=a.guid++,c.id||(c.id="onoffswitch"+d++),this.enable(),void a.data(c,b.datakey,this))}var c={props:["clientX","clientY"],filter:function(a,b){var c;return!b.clientX&&b.touches&&(c=b.touches[0])&&(a.clientX=c.clientX,a.clientY=c.clientY),a}};a.each(["touchstart","touchmove","touchend"],function(b,d){a.event.fixHooks[d]=c});var d=1,e=Array.prototype.slice,f=!!window.PointerEvent,g=navigator.userAgent,h=-1!==g.indexOf("iPhone")||-1!==g.indexOf("iPod")||-1!==g.indexOf("iPad")||-1!==g.indexOf("Android");return b.datakey="_onoff",b.defaults={namespace:".onoff",className:"onoffswitch-checkbox"},b.prototype={constructor:b,instance:function(){return this},wrap:function(){var b=this.elem,c=this.$elem,d=this.options,e=c.parent(".onoffswitch");e.length||(c.wrap('<div class="onoffswitch"></div>'),e=c.parent().addClass(b.className.replace(d.className,""))),this.$con=e;var f=c.next('label[for="'+b.id+'"]');f.length||(f=a("<label/>").attr("for",b.id).insertAfter(b)),this.$label=f.addClass("onoffswitch-label");var g=f.find(".onoffswitch-inner");g.length||(g=a("<div/>").addClass("onoffswitch-inner").prependTo(f)),this.$inner=g;var h=f.find(".onoffswitch-switch");h.length||(h=a("<div/>").addClass("onoffswitch-switch").appendTo(f)),this.$switch=h},_handleMove:function(a){if(!this.disabled){this.moved=!0,this.lastX=a.clientX;var b=Math.max(Math.min(this.startX-this.lastX,this.maxRight),0);this.$switch.css("right",b),this.$inner.css("marginLeft",100*-(b/this.maxRight)+"%")}},_startMove:function(b){b.preventDefault();var c,d;if(f)c="pointermove",d="pointerup";else if("touchstart"===b.type)c="touchmove",d="touchend";else{if(h)return b.preventDefault(),void b.stopPropagation();c="mousemove",d="mouseup"}var e=this.elem,g=this.options.namespace,i=this.$switch,j=i[0],k=this.$inner.add(i).css("transition","none");this.maxRight=this.$con.width()-i.width()-a.css(j,"margin-left",!0)-a.css(j,"margin-right",!0)-a.css(j,"border-left-width",!0)-a.css(j,"border-right-width",!0);var l=e.checked;this.moved=!1,this.startX=b.clientX+(l?0:this.maxRight);var m=this,n=this.$doc.on(c+g,a.proxy(this._handleMove,this)).on(d+g,function(){k.css("transition",""),n.off(g),setTimeout(function(){if(m.moved){var b=m.lastX>m.startX-m.maxRight/2;b!==e.checked&&(e.checked=b,a(e).trigger("change"))}else if(h){m.triggeredClick=!0;var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!0,!1,0,null),m.$label[0].dispatchEvent(c)}m.$switch.css("right",""),m.$inner.css("marginLeft","")})})},_bind:function(){this._unbind();var b=f?"pointerdown":"mousedown touchstart",c=this;this.$switch.unbind(b).on(b,a.proxy(this._startMove,this)),h?this.$label.unbind("click touchstart").bind("click",function(a){return c.triggeredClick&&!a.shiftKey?(a.preventDefault(),!1):void 0}).bind("touchstart",function(){c.triggeredClick=!1}):this.$switch.unbind("click").bind("click",function(a){return c.disabled?void 0:c.moved?(a.preventDefault(),!1):void 0}),this.$elem.unbind("change").bind("change",function(){a(this).parents(".switch").trigger("switch-change",{el:a(this),value:a(this).is(":checked")})})},enable:function(){this.wrap(),this._bind(),this.disabled=!1,this.$elem.prop("disabled",!1),this.$label.removeClass("deactivate")},_unbind:function(){var a=this.options.namespace;this.$doc.off(a),this.$switch.off(a)},disable:function(){this.disabled=!0,this.$elem.prop("disabled",!0),this._unbind(),this.$label.addClass("deactivate")},unwrap:function(){this.disable(),this.$label.remove(),this.$elem.unwrap()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),a.removeData(this.elem,b.datakey)},option:function(b,c){var d,e=this.options;if(!b)return a.extend({},e);if("string"==typeof b){if(1===arguments.length)return void 0!==e[b]?e[b]:null;d={},d[b]=c}else d=b;a.each(d,a.proxy(function(a,b){switch(a){case"namespace":this._unbind();break;case"className":this.$elem.removeClass(e.className)}switch(e[a]=b,a){case"namespace":this._bind();break;case"className":this.$elem.addClass(b)}},this))}},a.fn.onoff=function(c){var d,f,g,h;return"string"==typeof c?(h=[],f=e.call(arguments,1),this.each(function(){d=a.data(this,b.datakey),d?"_"!==c.charAt(0)&&"function"==typeof(g=d[c])&&void 0!==(g=g.apply(d,f))&&h.push(g):h.push(void 0)}),h.length?1===h.length?h[0]:h:this):this.each(function(){new b(this,c)})},a.OnOff=b});